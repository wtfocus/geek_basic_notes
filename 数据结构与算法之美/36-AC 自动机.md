[toc]

## 36 | AC自动机：如何用多模式串匹配实现敏感词过滤功能？

![img](imgs/b48bf407fcd03efc4ff2d3bd488d3666.jpg)

1.  开篇题
    -   实现一个高性能的敏感词过滤系统

### 单模式串&多模式串

1.  **单模式串**匹配算法，是在**一个模式串**和**一个主串**之间进行匹配，也就是说，在一个主串中查找一个模式串。
    -   BF/RK/BM/KMP 算法
2.  **多模式串**匹配算法，就是在**多个模式串**和**一个主串**之间做匹配，也就是说，在一个主串中查找多个模式串。
    -   Trie 树
3.  多模式串匹配算法，只需要扫描**一遍**主串，就能在主串中一次性查找多个模式串是否存在

### AC 自动机（经典多模式串匹配算法）

1.  AC 自动机，实际上就是在 **Trie 树**之上，加了类似 KMP 的 **next** 数组，只不过此处的 next 数组是构建在树上罢了

2.  代码

    -   ```java
        
        public class AcNode {
          public char data; 
          public AcNode[] children = new AcNode[26]; // 字符集只包含a~z这26个字符
          public boolean isEndingChar = false; // 结尾字符为true
          public int length = -1; // 当isEndingChar=true时，记录模式串长度
          public AcNode fail; // 失败指针
          public AcNode(char data) {
            this.data = data;
          }
        }
        ```

3.  AC 自动机的构建，包含两个操作：

    -   将多个模式串**构建成 Trie 树**；
    -   在 Trie 树上**构建失败指针**（相当于 KMP 中的失效函数 next 数组）。

