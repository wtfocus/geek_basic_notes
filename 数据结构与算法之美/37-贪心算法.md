[TOC]

## 37 | 贪心算法：如何用贪心算法实现 Huffman 压缩编码？

1.  几种基础算法思想

	- 贪心算法（本节重点）
	- 分治算法
	- 回溯算法
	- 动态规划
2.  开篇题

	- 看看**霍夫曼编码**是如何利用贪心算法来实现对数据压缩编码，有效节省数据存储空间。

### 贪心算法

1.  贪心算法解决问题的步骤

	1.  看到**这类问题**的时候，首先要联想到贪心算法

		> 我们定义了**限制值**和**期望值**
		>
		> 希望，在满足限制值的情况下，期望值最大。

	2.  尝试看下这个问题是否可以用贪心算法解决

		> 每次选择**当前**情况下
		>
		> 在对限制值同等贡献量的情况下，对期望值贡献最大的数据。

	3.  举几个例子看下贪心算法产生的结果是否是**最优**的

		> 大部分情况下，举几个例子验证一下就可以了。
		>
		> 也不需要严格的数学推导证明。
		>
		> 
		>
		> 实际上，用贪心算法解决问题的思路，并不总能给出最优解。

### 实战分析

#### 1. 分糖果

-   背景
    -   m 个糖果和 n 个孩子。我们要把糖果分给这些孩子，但是，糖果少，孩子多（m<n），所以，糖果只能分配给一部分孩子。
-   需求
    -   如何分配糖果，能尽可能满足最多数量的孩子？
-   解决思路
    -   我们每次从剩下的孩子中，找出对糖果大小**需求最小的**，然后，发给他剩下的糖果中**能满足**他的**最小的糖果**，这样得到的分配方案，也就是满足的孩子个数最多的方案。

#### 2. 钱币找零

-   需求
    -   在日常生活中，我们要用 1，2，5，10，20， 50 元这些钱来支付 K 元，最小要用多少张纸币呢？
-   解决思路
    -   我们肯定先用面值最大的来支付，如果不够，就继续用更小一点的面值，以此类推，最后剩下的用 1 元的补齐。
    -   **在贡献相同期望值的情况下，我们希望多贡献点金额，这样就可以让纸币数更少**，这就是一种贪心算法的解决思路。

#### 3. 区间覆盖

- 需求
	- 假设我们有 n 个区间，区间的起始端点和结束端点分别是[l1, r1]，[l2, r2]，[l3, r3]，……，[ln, rn]。
	- 我们从这 n 个区间中选出一部分区间，这部分区间满足两两不相交（端点相交的情况不算相交），最多能选出多少个区间呢？
	- ![img](imgs/f0a1b7978711651d9f084d19a70805cd-9414917.jpg)
- 解决思路
	- 我们每次选择的时候，左端点跟前面的已经覆盖的区间不重合的，右端点又尽量小的，这样可以让剩下的未覆盖区间尽可能的大，就可以放置更多的区间。
	- ![img](imgs/ef2d0bd8284cb6e69294566a45b0e2b5-9414954.jpg)

### 霍夫曼编码

1.  观注点
    1.  文本中有**多少个不同字符**
    2.  每个字符出现的**频率**
2.  霍夫曼编码试图根据频率的不同，选择**不同长度**的编码。用这种**不等长**的编码方法，来进一步增加压缩的效率。
3.  如何给不同频率的字符选择不同长度的编码呢？
    -   根据贪心的思想
        -   把出现频率比较多的字符，用稍微短一些的编码；
        -   把出现频率比较少的字符，用稍微长一些的编码。
4.  解压缩时，因为霍夫曼编码是不等长的，那每次应该读取 1 位还是 2 位、3 位呢？
    -   为了避免解压缩过程中的歧义，霍夫曼编码要求各个字符的编码之间，**不会出现某个编码是另一个编码前缀的情况。**
    -   任何一个字符的编码都不是另一个的前缀，在解压缩的时候，我们每次会读取尽可能长的可解压的二进制串。
    -   ![img](imgs/83921e609c8a4dc81ca5b90c8b4cd745-9456595.jpg)
5.  尽管霍夫曼编码如何根据字符出现频率的不同，给不同的字符进行不同长度的编码呢？
    -   我们把每个字符和频率放到优先级队列中。
    -   我们从队列中取出频率最小的两个节点 A、B，然后新建一个节点 C，把频率设置为两个节点的频率之和，并把这个新节点 C 作为节点 A、B 的父节点。最后再把 C 节点放入到优先级队列中。重复这个过程，直到队列中没有数据。
    -   ![img](imgs/7b6a08e7df45eac66820b959c64f877a-9456682.jpg)
    -   我们给每一条边加上画一个权值，指向左子节点的边我们统统标记为 0，指向右子节点的边，我们统统标记为 1，那从根节点到叶节点的路径就是叶节点对应字符的霍夫曼编码。
    -   ![img](imgs/ccf15d048be005924a409574dce143ed-9456826.jpg)